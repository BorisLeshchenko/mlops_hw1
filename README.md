# MLOps –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ ‚Ññ1: –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ ML-pipeline —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DVC –∏ MLflow –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Iris Classification Pipeline

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–≥–æ ML –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DVC –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π –¥–∞–Ω–Ω—ã—Ö, MLflow –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –∏ Git –¥–ª—è –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
mlops_hw1/  
‚îú‚îÄ‚îÄ data/  
‚îÇ ‚îú‚îÄ‚îÄ raw/ # –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (—É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è DVC)  
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ iris.csv # Iris dataset (–ª–æ–∫–∞–ª—å–Ω–æ)  
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ iris.csv.dvc # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ DVC  
‚îÇ ‚îî‚îÄ‚îÄ processed/ # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ dvc repro)  
‚îÇ ‚îú‚îÄ‚îÄ X_train.pkl  
‚îÇ ‚îú‚îÄ‚îÄ X_test.pkl  
‚îÇ ‚îú‚îÄ‚îÄ y_train.pkl  
‚îÇ ‚îú‚îÄ‚îÄ y_test.pkl  
‚îÇ ‚îî‚îÄ‚îÄ .gitignore # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã DVC  
‚îú‚îÄ‚îÄ src/  
‚îÇ ‚îú‚îÄ‚îÄ prepare.py # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö: split train/test  
‚îÇ ‚îî‚îÄ‚îÄ train.py # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º MLflow  
‚îú‚îÄ‚îÄ models/  
‚îÇ ‚îú‚îÄ‚îÄ model.pkl # –û–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ dvc repro)  
‚îÇ ‚îî‚îÄ‚îÄ .gitignore # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã DVC  
‚îú‚îÄ‚îÄ .dvcignore # –ö–æ–Ω—Ñ–∏–≥ DVC (–∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å)  
‚îú‚îÄ‚îÄ .gitignore # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è (Python, MLflow –∏ —Ç.–¥.)  
‚îú‚îÄ‚îÄ dvc.yaml # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DVC –ø–∞–π–ø–ª–∞–π–Ω–∞ (—Å—Ç–∞–¥–∏–∏ prepare –∏ train)  
‚îú‚îÄ‚îÄ dvc.lock # –•—ç—à–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)  
‚îú‚îÄ‚îÄ params.yaml # –ì–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–π–ø–ª–∞–π–Ω–∞  
‚îú‚îÄ‚îÄ requirements.txt # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏  
‚îî‚îÄ‚îÄ README.md # –≠—Ç–æ—Ç —Ñ–∞–π–ª  

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.10+
- Git
- DVC (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone git@github.com:BorisLeshchenko/mlops_hw1.git
cd mlops_hw1

### 2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv

Windows (PowerShell)
.venv\Scripts\Activate.ps1

Windows (Command Prompt)
.venv\Scripts\activate.bat

macOS/Linux
source .venv/bin/activate

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

### 4. –ü–æ–ª—É—á–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ DVC
dvc pull

### 5. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –ø–∞–π–ø–ª–∞–π–Ω
dvc repro
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
1. –ó–∞–≥—Ä—É–∑–∏—Ç —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ `data/raw/iris.csv`
2. –í—ã–ø–æ–ª–Ω–∏—Ç —Å—Ç–∞–¥–∏—é `prepare`: —Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ train/test
3. –í—ã–ø–æ–ª–Ω–∏—Ç —Å—Ç–∞–¥–∏—é `train`: –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ LogisticRegression
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç –º–æ–¥–µ–ª—å –≤ `models/model.pkl`

## DVC –ü–∞–π–ø–ª–∞–π–Ω

–ü–∞–π–ø–ª–∞–π–Ω –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ `dvc.yaml` –∏ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —Å—Ç–∞–¥–∏–π:

### –°—Ç–∞–¥–∏—è 1: `prepare` (–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö)
cmd: python src/prepare.py

- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - `data/raw/iris.csv` ‚Äî —Å—ã—Ä–æ–π –¥–∞—Ç–∞—Å–µ—Ç (150 –æ–±—Ä–∞–∑—Ü–æ–≤)
  - `src/prepare.py` ‚Äî —Å–∫—Ä–∏–ø—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
  - `params.yaml` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (split_ratio, random_state)

- **–í—ã—Ö–æ–¥—ã:**
  - `data/processed/X_train.pkl` ‚Äî –ø—Ä–∏–∑–Ω–∞–∫–∏ –æ–±—É—á–∞—é—â–µ–π –≤—ã–±–æ—Ä–∫–∏ (120 –æ–±—Ä–∞–∑—Ü–æ–≤)
  - `data/processed/X_test.pkl` ‚Äî –ø—Ä–∏–∑–Ω–∞–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏ (30 –æ–±—Ä–∞–∑—Ü–æ–≤)
  - `data/processed/y_train.pkl` ‚Äî —Ü–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—É—á–∞—é—â–µ–π –≤—ã–±–æ—Ä–∫–∏
  - `data/processed/y_test.pkl` ‚Äî —Ü–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–∏

### –°—Ç–∞–¥–∏—è 2: `train` (–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏)
cmd: python src/train.py

- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞–¥–∏–∏ `prepare`
  - `src/train.py` ‚Äî —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è
  - `params.yaml` ‚Äî –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (model, random_state, max_iter)

- **–í—ã—Ö–æ–¥—ã:**
  - `models/model.pkl` ‚Äî –æ–±—É—á–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å LogisticRegression

- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
  - –ú–µ—Ç—Ä–∏–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ MLflow (`mlruns/`)

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

–í—Å–µ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ `params.yaml`:
prepare:
split_ratio: 0.8 # –î–æ–ª—è –æ–±—É—á–∞—é—â–µ–π –≤—ã–±–æ—Ä–∫–∏
random_state: 42 # Seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏

train:
model: "LogisticRegression" # –¢–∏–ø –º–æ–¥–µ–ª–∏
random_state: 42 # Seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏
max_iter: 200 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞

## üîÑ –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—É—é –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è:

1. **DVC (`dvc.yaml`, `dvc.lock`)**
   - –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π –¥–∞–Ω–Ω—ã—Ö –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
   - `dvc.lock` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö—ç—à–∏ (MD5) –≤—Å–µ—Ö –≤—Ö–æ–¥–æ–≤, –≤—ã—Ö–æ–¥–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –ü–∞–π–ø–ª–∞–π–Ω –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

2. **Git**
   - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (`src/prepare.py`, `src/train.py`)
   - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`params.yaml`, `dvc.yaml`)

3. **Random seeds**
   - `random_state: 42` –≤ `params.yaml` –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å

4. **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
   - `requirements.txt` —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - `.venv/` –∏–∑–æ–ª–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è         | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                               |
|--------------------|--------|------------------------------------------|
| Python             | 3.10+  | –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è                    |
| DVC                | Latest | –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π –¥–∞–Ω–Ω—ã—Ö –∏ ML –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤   |
| scikit-learn       | Latest | ML –º–æ–¥–µ–ª–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏                      |
| MLflow             | Latest | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ |
| pandas             | Latest | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö               |
| numpy              | Latest | –ß–∏—Å–ª–µ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è                     |
| PyYAML             | Latest | –†–∞–±–æ—Ç–∞ —Å YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π              |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ params.yaml
–ù–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏—Ç–µ split_ratio: 0.7
2. –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –ø–∞–π–ø–ª–∞–π–Ω
dvc repro

DVC –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç–∞–¥–∏–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞
dvc status

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Å—Ç–∞–¥–∏–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–æ–±—É—á–∏—Ç—å

### –ü—Ä–æ—Å–º–æ—Ç—Ä DAG (–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –≥—Ä–∞—Ñ) –ø–∞–π–ø–ª–∞–π–Ω–∞
dvc dag

–í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å—Ç–∞–¥–∏—è–º–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
dvc metrics show

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### Iris Dataset
- **–†–∞–∑–º–µ—Ä:** 150 –æ–±—Ä–∞–∑—Ü–æ–≤
- **–ü—Ä–∏–∑–Ω–∞–∫–∏:** 4 —á–∏—Å–ª–µ–Ω–Ω—ã—Ö (–¥–ª–∏–Ω–∞/—à–∏—Ä–∏–Ω–∞ —á–∞—à–µ–ª–∏—Å—Ç–∏–∫–∞ –∏ –ª–µ–ø–µ—Å—Ç–∫–∞)
- **–ö–ª–∞—Å—Å—ã:** 3 –∫–ª–∞—Å—Å–∞ (setosa, versicolor, virginica)
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–∞—Ç–∞—Å–µ—Ç UCI

### –ü–æ—Å–ª–µ split (80/20)
- **Train:** 120 –æ–±—Ä–∞–∑—Ü–æ–≤
- **Test:** 30 –æ–±—Ä–∞–∑—Ü–æ–≤